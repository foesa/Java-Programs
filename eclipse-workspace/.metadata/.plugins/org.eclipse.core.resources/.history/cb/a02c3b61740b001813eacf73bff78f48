import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Scanner;

public class WordlinksGame {
	public static ArrayList<String> readDictionary() {
		ArrayList<String> dictionary = new ArrayList<String>();
		try {
			BufferedReader reader = new BufferedReader(
					new FileReader("C:\\Users\\legua\\eclipse-workspace\\Wordlinks\\src\\wordlinks.txt"));
			String line;
			while ((line = reader.readLine()) != null) {
				dictionary.add(line);
			}
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return dictionary;
	}

	public static String[] readWordList(String input) {
		String[] inputArray = input.split(",");
		return inputArray;
	}

	public static boolean isUniqueList(String[] inputArray) {
		for (int count = 0; count < inputArray.length; count++) {
			String comparison = inputArray[count];
			int comparisonCounter = count;
			while (comparisonCounter < inputArray.length - 1) {
				if (comparison.equals(inputArray[comparisonCounter + 1])) {
					return false;
				} else {
					comparisonCounter++;
				}
			}
		}
		return true;
	}

	public static boolean isEnglishWord(String word, ArrayList<String> dictionary) {
		if ((Collections.binarySearch(dictionary, word)) > 0) {
			return true;
		}
		return false;
	}

	public static boolean isDifferentByOne(String word1, String word2) {
		if (word1.length() == word2.length()) {
			int differenceNumber = 0;
			for (int count = 0; count < word1.length(); count++) {
				if (word1.charAt(count) != word2.charAt(count)) {
					differenceNumber++;
				}
				if (differenceNumber > 1) {
					return false;
				}
			}

		}
		return true;
	}

	public static boolean isValidwordLink(String[] input, ArrayList<String> dictionary) {
		if (isUniqueList(input)) {
			for (int count = 0; count < input.length; count++) {
				String word = input[count];
				if (!isEnglishWord(word, dictionary)) {
					System.out.println("Invalid word link, " + word + "is not a valid word");
					return false;
				}
			}
			for (int count = 0; count < input.length; count++) {
				String word1 = input[count];
				String word2 = input[count + 1];
				if (!isDifferentByOne(word1, word2)) {
					System.out.println("Not a valid chain of words from Lewis Carroll's word-links game.");
					return false;
				}
			}
		} else {
			System.out.println("The word list is not unique");
			return false;
		}
		return true;
	}

	public static void main(String[] args) {
		ArrayList<String> dictionary = readDictionary();
		Scanner skinner = new Scanner(System.in);
		boolean finished = false;
		while (!finished) {
			System.out.println("Enter a comma separated list of words (or an empty list to quit):");
			String inputString = skinner.nextLine();
			String[] inputArray = readWordList(inputString);
			if (inputString.equals("")) {
				System.out.println("Goodbye");
				finished = true;
			} else if (isValidwordLink(inputArray, dictionary)) {
				System.out.println("Valid chain of words from Lewis Carroll's word-links game.");
			}
		}
	}
}
